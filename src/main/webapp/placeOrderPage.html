<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>会员制时装共享平台</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


    <!-- Bootstrap -->

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.5.22/vue.js">
    </script>


    <link rel="stylesheet" type="text/css" href="css/index.css"/>
</head>

<body>
<div id='app'>
    <div id="title">


        <header class="col-12 alert alert-success">
            <div class="navbar navbar-default">
                <div class="nav navbar-nav navbar-left col-6">
                    <h1>{{sitename}}</h1>
                </div>




                <div class="nav navbar-nav navbar-right col-2">你好!{{username}}</div>
               

                <div class="nav navbar-nav navbar-right col-1">
                    <button class="btn btn-light">
                        <a href="file:///G:/hp/WEB/UI/ui5/ui5.html">
                            个人中心
                            </span>
                        </a>
                    </button>
                </div>

                <div class="nav navbar-nav navbar-right cart col-2">
                    <button class="btn btn-light">
                        <a href="file:///G:/hp/WEB/UI/ui5/ui5.html">
                                <span class="glyphicon glyphicon-shopping-cart ">
                                    <span class="badge badge-primary badge-pill">{{countNum}}</span> CheckedOut
                                   
                                </span>
                            </span>
                        </a>
                    </button>
                </div>




                <div class="nav navbar-nav navbar-right col-1">
                    <button class="btn btn-light">
                        <a href="file:///G:/hp/WEB/UI/ui5/ui5.html">
                            退出登录
                            </span>
                        </a>
                    </button>

                </div>


            </div>

        </header>

    </div>

    <main>
        <div class=" col-lg-12 col-lg-offset-1">
            <h1>
                选择地址
            </h1>
            <div  v-for='(address,key) in addresses' :value="key">
                <label class　="radio-inline">
                    <input type="radio" name="inlineRadioOptions"> {{address}}  {{names[key]}}  {{phones[key]}} <a href="">修改地址</a>
                  </label>
            </div>
            <br>
           
            
            <button type="button" class="btn btn-default">使用新地址</button>
         
             


        </div>
       
    <br>
    <br>
    <div class=" col-lg-12 col-lg-offset-1">
        <h1>
            确认订单信息
        </h1>
        <div class="row "  style="text-align:center">
            <div class="col-lg-2">
                商品名字
            </div>
           
            <div class="col-lg-2">
                单价
            </div>
            <div class="col-lg-2">
                数量
            </div>
            <div class="col-lg-2">
                小计
            </div>

        </div>


        <div class="row "  style="text-align:center"  v-for="clothing in clothings">
            <div class="col-lg-2">
               {{clothing.clothingname}}
            </div>
            <div class="col-lg-2">
              {{clothing.clothingprice|formatclothingprice}}
            </div>
           
              <div class="col-lg-2">
                {{clothing.clothingnum}}
              </div>
              <div class="col-lg-2">
                {{clothing.clothingprice*clothing.clothingnum|formatclothingprice}}
              </div>

        </div>
        <br>
        <br>
        
              <div class="col-lg-6">
                <label class="radio-inline">
                    <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                    <h3>
                        购买
                    </h3> 
                </label>
              </div>
              <div class="col-lg-6">
                <label class="radio-inline">
                    <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2"> 
                    <h3>
                        租赁
                    </h3>
                
                </label>
              </div>
      
        


        <div class="row ">
            <div class="col-lg-6">
                <h4>
                    留言                                    
                </h4>
    
            </div>
            <div class="col-lg-6">
                <h4>
                    总计{{countMoney}}
                </h4>
              
            </div>
        </div>
        
        <div class="col-lg-8">
            <textarea class="form-control" rows="3" style="resize:none ;"></textarea>
        </div>
        <div>
            <button type="button" class="btn btn-info">提交订单</button> 
        </div>


    </div>






</main>





</div>

<!-- 商品部分js -->
<script type="text/javascript">



    new Vue({
        el: '#app',
        data:{
            sitename:"会员制时装共享平台",
            username:"游客",
            showclothing:true,
            RimgUrl:"",
            
            clothings:[
            {
                    clothingid: 1,
                    clothingname: "garment",
                    clothingdescr: "<em>new garment</em>",
                    clothingprice: 699900,
                    clothingpic: 'img/1.png',
                    clothingnum: 4,
                    sccnum:1,
                },
                {
                    clothingid: 2,
                    clothingname: "garment",
                    clothingdescr: "<em>new garment</em>",
                    clothingprice: 699900,
                    clothingpic: 'img/1.png',
                    clothingnum: 4,
                    sccnum:1,
                },


            ],

           
                
            address:"",
			addresses:["beking","shanghai","guangdong"],
			names:["tim","tom","jerry"],
            phones:["123","321","2345"],
			totalprice:0,
       
            
            cart:[],


        },

        // created:function(){
        //     this.clothings.push(this.clothing);

        // },

        mounted:function(){
            // this.Query0();
          
           
        },

        methods:{
            addToCart:function(clothing){
                if(this.canAddToCart){
                    console.log('canAddToCart:');
                    this.cart.push(clothing.clothingid)
                }
              

                let that = this;
                $.ajax({
                    url: 'Addtoshoppingcart',

                    type: 'get',

                    data: {clothingid:clothing.clothingid ,     //传单值到后台成功
                            userid:1,

                    },

                    // dataType: "json",

                    success: function (e) {
                        console.log('success:', e);

                    }

                })



            },
            
            cartCount(clothingid){
                let count = 0
                for(let i = 0;i<this.cart.length;i++){
                    if(this.cart[i] === clothingid){
                        count++
                    }
                }
                return count
            },
            canAddToCart(aclothing){
                return aclothing.clothingnum > this.cartCount(aclothing.clothingid)
            },
      













            Query0(){
            
                let that = this;
                $.ajax({
                    url: 'QueryClothingById0',

                    type: 'get',

                    data: {clothingid: 0      //传单值到后台成功


                    },

                    // dataType: "json",

                    success: function (e) {
                        console.log('success:', e);

                     
                        for (let index = 0; index < e.data.length; index++) {
                            that.clothings.push(e.data[index]);

                        }

                    }

                })
            },




            Query(clothing){
                alert("Query");
                var _this = this;

                $.ajax({
                    url: 'QueryClothingById0',

                    type: 'get',

                    data: {clothingid: clothing.clothingid      //传单值到后台成功


                    },

                    // dataType: "json",

                    success: function (e) {
                        console.log('success:', e);

                        _this.str = e;

                    }

                })
            }


            // },





            //     created(clothing){
            //         alert("created");
            //         var _this = this;

            //         $.ajax({
            //         url: 'QueryOrderByIdTest',

            //         type: 'get',

            //         data: {orderformid: clothing.id      //传单值到后台成功


            //         },

            //         // dataType: "json",

            //         success: function (e) {
            //         console.log('success:', e);

            //         _this.str = e;

            //         }

            //         })
            //     }

            // },






            // Query(clothing){
            //         alert("query")
            //         var _this = this;
            //         // alert( clothing.clothingid);
            //         var clothing = {
            //                     "clothingid": clothing.clothingid ,    //这两个属性要和实体类的属性一样

            //                 };

            //    //传对象到后台成功





            //         $.ajax({
            //         url: 'QueryClothingByObj',

            //         type: 'POST',


            //         // type:"Post",
            //         dataType : "JSON",
            //         contentType:"application/json; charset=utf-8",
            //         data:JSON.stringify(clothing),




            //         // dataType: "json",

            //         success: function (e) {
            //         console.log('success:', e);

            //         _this.str = e;

            //         if(e.count>0){

            //         //     let n=0;
            //         // while(n<e.data.length){



            //         // alert("while"+e.data[n].clothingid);

            //         // clothingB.id= e.data[n].clothingid,
            //         // this.clothingB.title=e.data[n].userid,




            //         // this.clothings.push(e.data[n].clothingid)

            //         // listData:[],
            //         // list:[{"张三","李四"}]
            //         //比如想把另外一个数组中编列出来的值加入到这个数组中

            //         // let data0[]=e.data;
            //         for (let index = 0; index < _this.str.data.length; index++) {
            //             alert(_this.str.data[index].clothingid)

            //             let id=1;
            //                 this.clothings.push(id)
            //                 // this.clothings.push({ clothingid:"" });
            //                 // this.clothings[index].clothingid=_this.str.data[index].clothingid;
            //                 // this.listData[index].name= this.list[index];
            //                 }

            //             n++;
            //         // }
            //         }


            //         }

            //         })
            //     }

        },















        filters:{
            formatclothingprice:function(clothingprice){
                if(!parseInt(clothingprice)){return ""}
                else{
                    let clothingpriceString = (clothingprice/100).toFixed(2)
                    return "￥" + clothingpriceString
                }
            }
        },
        computed:{
            cartItemCount:function(){
                return this.cart.length || ""
            },
            cartCount(clothingid){
                let count = 0
                for(let i = 0;i<this.cart.length;i++){
                    if(this.cart[i] === clothingid){
                        count++
                    }
                }
                return count
            },
            canAddToCart(aclothing){
                return aclothing.clothingnum > this.cartCount(aclothing.clothingid)
            },
            countNum:function(){
              
                countNum = 0
                for (let i in this.clothings){
                    let num = this.cartCount(this.clothings[i].clothingid)
                    countNum += num
                }
                return countNum
            },
            countMoney:function(){
             
                countMoney = 0
                for (let i in this.clothings){
                    money = this.clothings[i].clothingprice*this.cartCount(this.clothings[i].clothingid)
                    countMoney += money
                }
                return countMoney
            },


        },






        // watched:{

        // }
    })

</script>


</body>





</html>